---
sidebar_position: 1
---

# 브라우저 주소창에 `www.google.com`을 입력하면 어떤 일이 일어나는가?

### 1. DNS 조회 (Domain Name System)

- 브라우저는 `www.google.com`의 IP 주소를 찾기 위해 DNS 조회를 시작합니다
- 먼저 브라우저 캐시 → OS 캐시 → 라우터 캐시 → ISP DNS 서버 순으로 확인합니다
- 캐시에 없다면 DNS 서버가 재귀적으로 조회하여 IP 주소(예: 142.250.185.78)를 반환합니다

### 2. TCP 연결 수립

- IP 주소를 얻었으면 해당 서버와 TCP 3-way handshake를 수행합니다
- SYN → SYN-ACK → ACK 과정을 거쳐 연결을 수립합니다
- HTTPS의 경우 추가로 TLS/SSL 핸드셰이크를 통해 암호화 연결을 설정합니다

### 3. HTTP 요청 전송

```
GET / HTTP/1.1
Host: www.google.com
User-Agent: Mozilla/5.0...
Accept: text/html...
```

- 브라우저가 HTTP 요청을 생성하여 서버로 전송합니다
- 쿠키가 있다면 Cookie 헤더에 포함됩니다

### 4. 서버 처리 및 응답

- 서버는 요청을 처리하고 HTML 문서를 응답합니다
- 응답에는 상태 코드(200 OK), 헤더, 본문(HTML)이 포함됩니다
- 보통 gzip으로 압축되어 전송됩니다

### 5. 브라우저 렌더링 과정 ⭐

**5-1. HTML 파싱 → DOM 트리 생성**

- HTML을 위에서부터 파싱하여 DOM(Document Object Model) 트리를 만듭니다
- `<script>` 태그를 만나면 파싱을 중단하고 스크립트를 실행합니다 (defer/async 제외)

**5-2. CSS 파싱 → CSSOM 트리 생성**

- CSS 파일들을 파싱하여 CSSOM(CSS Object Model) 트리를 만듭니다
- CSS는 렌더 블로킹 리소스입니다

**5-3. 렌더 트리 구성**

- DOM과 CSSOM을 결합하여 렌더 트리를 만듭니다
- display: none인 요소는 렌더 트리에 포함되지 않습니다

**5-4. Layout (Reflow)**

- 각 요소의 크기와 위치를 계산합니다
- 뷰포트 기준으로 상대적인 값들을 픽셀 값으로 변환합니다

**5-5. Paint**

- 렌더 트리의 각 노드를 실제 픽셀로 변환합니다
- 텍스트, 색상, 이미지, 그림자 등을 그립니다

**5-6. Composite**

- 여러 레이어를 합성하여 최종 화면을 만듭니다
- GPU 가속을 활용할 수 있습니다

### 6. 추가 리소스 로딩

- HTML 파싱 중 발견한 리소스들(CSS, JS, 이미지 등)을 병렬로 다운로드합니다
- 브라우저는 보통 도메인당 6개의 동시 연결을 허용합니다
- HTTP/2에서는 하나의 연결로 여러 리소스를 다중화하여 전송합니다

### 7. JavaScript 실행

- 다운로드된 JavaScript 파일을 파싱하고 실행합니다
- DOM API를 통해 동적으로 콘텐츠를 변경할 수 있습니다

<br></br>

## 관련된 추가 질문

### Q: 렌더링 최적화 방법은?

- CSS는 `<head>`에, JavaScript는 `<body>` 끝에 배치
- 이미지 레이지 로딩
- CSS/JS 번들링과 미니파이
- Critical CSS 인라인화
- 리소스 힌트 사용 (preload, prefetch, preconnect)

### Q: Reflow와 Repaint의 차이는?

- **Reflow**: 레이아웃 재계산 (위치, 크기 변경 시)
- **Repaint**: 스타일 변경만 (색상, 배경 등)
- Reflow가 발생하면 Repaint도 발생하므로 더 비용이 큽니다

### Q: 스크립트 로딩 방식의 차이는?

- **일반**: HTML 파싱 중단, 즉시 다운로드 및 실행
- **async**: 병렬 다운로드, 다운로드 완료 시 파싱 중단하고 실행
- **defer**: 병렬 다운로드, HTML 파싱 완료 후 순서대로 실행

### Q: HTTP/1.1과 HTTP/2의 차이는?

- **HTTP/1.1**: 텍스트 기반, HOL 블로킹, 도메인당 6개 연결 제한
- **HTTP/2**: 바이너리 기반, 멀티플렉싱, 서버 푸시, 헤더 압축
